<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒˆ ç¥å¥‡å¤©æ°”é¢„æŠ¥ ğŸŒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'YouYuan', 'Microsoft YaHei', cursive;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        /* åŠ¨æ€èƒŒæ™¯ */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        /* æ˜Ÿæ˜Ÿ */
        .star {
            position: absolute;
            font-size: 20px;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.5; transform: scale(0.8) rotate(180deg); }
        }

        /* æ¼‚æµ®çš„äº‘æœµ */
        .cloud {
            position: absolute;
            font-size: 80px;
            opacity: 0.7;
            animation: float 25s infinite linear;
            filter: drop-shadow(0 10px 20px rgba(255,255,255,0.3));
        }

        @keyframes float {
            0% { transform: translateX(-150px) translateY(0); }
            50% { transform: translateY(-30px); }
            100% { transform: translateX(calc(100vw + 150px)) translateY(0); }
        }

        /* å½©è™¹ */
        .rainbow {
            position: absolute;
            font-size: 120px;
            opacity: 0.6;
            animation: rainbow-float 15s infinite ease-in-out;
        }

        @keyframes rainbow-float {
            0%, 100% { transform: translateY(0) rotate(-10deg); }
            50% { transform: translateY(-50px) rotate(10deg); }
        }

        /* æ°”æ³¡ */
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            animation: rise 8s infinite ease-in;
            bottom: -50px;
        }

        @keyframes rise {
            0% { transform: translateY(0) scale(1); opacity: 0.8; }
            100% { transform: translateY(-100vh) scale(1.5); opacity: 0; }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            background: linear-gradient(135deg, #FFF5F5 0%, #FFE4E1 25%, #E6F3FF 50%, #F0FFF0 75%, #FFFACD 100%);
            border-radius: 50px;
            padding: 50px 40px;
            box-shadow: 
                0 25px 80px rgba(0,0,0,0.2),
                0 0 0 10px #FFB6C1,
                0 0 0 15px #FFD700,
                0 0 0 20px #FF69B4,
                inset 0 0 60px rgba(255,255,255,0.5);
            text-align: center;
            max-width: 600px;
            width: 100%;
            position: relative;
            z-index: 10;
            border: 8px dashed #FF69B4;
            animation: container-glow 3s infinite;
        }

        @keyframes container-glow {
            0%, 100% { box-shadow: 0 25px 80px rgba(255,105,180,0.3), 0 0 0 10px #FFB6C1, 0 0 0 15px #FFD700, 0 0 0 20px #FF69B4; }
            50% { box-shadow: 0 25px 80px rgba(255,215,0,0.3), 0 0 0 10px #FFD700, 0 0 0 15px #FF69B4, 0 0 0 20px #FFB6C1; }
        }

        /* è£…é¥°è§’æ ‡ */
        .corner-decoration {
            position: absolute;
            font-size: 50px;
            z-index: 11;
        }
        .corner-tl { top: -25px; left: -25px; animation: bounce 2s infinite; }
        .corner-tr { top: -25px; right: -25px; animation: bounce 2s infinite 0.5s; }
        .corner-bl { bottom: -25px; left: -25px; animation: bounce 2s infinite 1s; }
        .corner-br { bottom: -25px; right: -25px; animation: bounce 2s infinite 1.5s; }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(10deg); }
        }

        /* æ ‡é¢˜ */
        .title {
            font-size: 2.5em;
            background: linear-gradient(45deg, #FF6B6B, #FFD93D, #4ECDC4, #FF6B6B);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-shift 5s infinite;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255,107,107,0.3);
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* åŸå¸‚é€‰æ‹©å™¨ */
        .city-selector {
            background: linear-gradient(135deg, #FFE4E1 0%, #FFB6C1 100%);
            border-radius: 30px;
            padding: 20px;
            margin-bottom: 30px;
            border: 4px solid #FF69B4;
            box-shadow: 0 10px 30px rgba(255,105,180,0.3);
        }

        .city-selector label {
            font-size: 1.5em;
            color: #FF6B6B;
            display: block;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .city-select {
            width: 100%;
            padding: 15px 25px;
            font-size: 1.3em;
            border: 4px solid #FFD700;
            border-radius: 20px;
            background: white;
            color: #667eea;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
            outline: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .city-select:hover {
            border-color: #FF69B4;
            transform: scale(1.02);
        }

        .city-select:focus {
            border-color: #4ECDC4;
            box-shadow: 0 0 20px rgba(78,205,196,0.5);
        }

        /* åŸå¸‚åç§°æ˜¾ç¤º */
        .city-name {
            font-size: 2.5em;
            color: #FF6B6B;
            text-shadow: 
                3px 3px 0 #FFD93D,
                6px 6px 0 #FF6B6B,
                0 0 30px rgba(255,107,107,0.5);
            margin-bottom: 20px;
            animation: city-bounce 2s infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        @keyframes city-bounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.05); }
        }

        .city-emoji {
            font-size: 1.2em;
            animation: spin 10s infinite linear;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* å¤©æ°”ä¸»å›¾æ ‡ */
        .weather-icon-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 20px auto;
        }

        .weather-icon {
            font-size: 180px;
            filter: drop-shadow(0 15px 30px rgba(0,0,0,0.3));
            animation: weather-wiggle 3s infinite;
            position: relative;
            z-index: 2;
        }

        @keyframes weather-wiggle {
            0%, 100% { transform: rotate(-8deg) scale(1); }
            25% { transform: rotate(8deg) scale(1.05); }
            50% { transform: rotate(-8deg) scale(1); }
            75% { transform: rotate(8deg) scale(1.05); }
        }

        .icon-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 180px;
            height: 180px;
            background: radial-gradient(circle, rgba(255,215,0,0.6) 0%, transparent 70%);
            border-radius: 50%;
            animation: glow-pulse 2s infinite;
            z-index: 1;
        }

        @keyframes glow-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.3; }
        }

        /* æ¸©åº¦ */
        .temperature {
            font-size: 5em;
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 0 0 30px rgba(78,205,196,0.5);
            animation: temp-pulse 2s infinite;
        }

        @keyframes temp-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* å¤©æ°”æè¿° */
        .weather-desc {
            font-size: 2em;
            color: #FF6B6B;
            background: linear-gradient(135deg, #FFF 0%, #FFE4E1 100%);
            padding: 20px 40px;
            border-radius: 40px;
            display: inline-block;
            margin: 20px 0;
            border: 5px solid #FFD93D;
            box-shadow: 0 10px 30px rgba(255,217,61,0.4);
            animation: desc-float 3s infinite;
        }

        @keyframes desc-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* è¯¦æƒ…å¡ç‰‡ */
        .details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .detail-card {
            background: linear-gradient(135deg, #FFE4E1 0%, #FFB6C1 50%, #FFE4E1 100%);
            border-radius: 25px;
            padding: 25px 15px;
            border: 4px solid #FF69B4;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(255,105,180,0.3);
        }

        .detail-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.4), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .detail-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255,105,180,0.5);
        }

        .detail-icon {
            font-size: 3em;
            margin-bottom: 10px;
            animation: icon-bounce 2s infinite;
        }

        @keyframes icon-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .detail-label {
            font-size: 1.1em;
            color: #888;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.8em;
            color: #FF6B6B;
            font-weight: bold;
            text-shadow: 2px 2px 0 #FFD93D;
        }

        /* é¢„æŠ¥åŒºåŸŸ */
        .forecast {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 5px dashed #FFB6C1;
        }

        .forecast-title {
            font-size: 2em;
            color: #FF6B6B;
            margin-bottom: 25px;
            text-shadow: 2px 2px 0 #FFD93D;
        }

        .forecast-days {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .forecast-day {
            background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 50%, #E0F7FA 100%);
            border-radius: 25px;
            padding: 20px 15px;
            min-width: 110px;
            border: 4px solid #4ECDC4;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 8px 25px rgba(78,205,196,0.3);
            position: relative;
            overflow: hidden;
        }

        .forecast-day::after {
            content: 'âœ¨';
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 15px;
            animation: twinkle 1.5s infinite;
        }

        .forecast-day:hover {
            transform: translateY(-15px) scale(1.1) rotate(5deg);
            box-shadow: 0 15px 40px rgba(78,205,196,0.5);
        }

        .forecast-day-name {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .forecast-day-icon {
            font-size: 3.5em;
            margin: 10px 0;
            animation: forecast-icon-bounce 2s infinite;
        }

        @keyframes forecast-icon-bounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-8px) rotate(10deg); }
        }

        .forecast-day-temp {
            font-size: 1.4em;
            color: #FF6B6B;
            font-weight: bold;
            text-shadow: 1px 1px 0 #FFD93D;
        }

        /* åˆ·æ–°æŒ‰é’® */
        .refresh-btn {
            margin-top: 35px;
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 50%, #FF6B6B 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.6em;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            box-shadow: 
                0 10px 0 #CC5555,
                0 15px 30px rgba(255,107,107,0.4);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .refresh-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .refresh-btn:hover::before {
            left: 100%;
        }

        .refresh-btn:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 0 #CC5555,
                0 20px 40px rgba(255,107,107,0.5);
        }

        .refresh-btn:active {
            transform: translateY(5px);
            box-shadow: 
                0 5px 0 #CC5555,
                0 8px 20px rgba(255,107,107,0.4);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            font-size: 2.5em;
            color: #FF6B6B;
            animation: loading-bounce 1s infinite;
        }

        @keyframes loading-bounce {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        .loading-dots {
            display: inline-block;
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* é”™è¯¯æç¤º */
        .error-message {
            background: linear-gradient(135deg, #FFE4E1 0%, #FFB6C1 100%);
            border-radius: 30px;
            padding: 30px;
            border: 4px solid #FF6B6B;
        }

        .error-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        /* å“åº”å¼ */
        @media (max-width: 600px) {
            .container {
                padding: 30px 20px;
                border-radius: 30px;
            }

            .title {
                font-size: 1.8em;
            }

            .city-name {
                font-size: 1.8em;
            }

            .weather-icon {
                font-size: 120px;
            }

            .temperature {
                font-size: 3.5em;
            }

            .weather-desc {
                font-size: 1.5em;
                padding: 15px 25px;
            }

            .detail-icon {
                font-size: 2em;
            }

            .detail-value {
                font-size: 1.4em;
            }

            .forecast-day {
                min-width: 90px;
                padding: 15px 10px;
            }

            .refresh-btn {
                font-size: 1.3em;
                padding: 15px 35px;
            }
        }
    </style>
</head>
<body>
    <!-- èƒŒæ™¯åŠ¨ç”» -->
    <div class="bg-animation" id="bg-animation"></div>

    <div class="container">
        <!-- è£…é¥°è§’æ ‡ -->
        <div class="corner-decoration corner-tl">ğŸŒŸ</div>
        <div class="corner-decoration corner-tr">ğŸ¦„</div>
        <div class="corner-decoration corner-bl">ğŸŒˆ</div>
        <div class="corner-decoration corner-br">âœ¨</div>

        <h1 class="title">ğŸŒˆ ç¥å¥‡å¤©æ°”é¢„æŠ¥ ğŸŒˆ</h1>

        <!-- åŸå¸‚é€‰æ‹©å™¨ -->
        <div class="city-selector">
            <label for="city-select">ğŸ—ºï¸ é€‰æ‹©ä¸€ä¸ªåŸå¸‚ï¼š</label>
            <select class="city-select" id="city-select" onchange="changeCity()">
                <option value="Nanjing" data-emoji="ğŸ¯">å—äº¬</option>
                <option value="Beijing" data-emoji="ğŸ›ï¸">åŒ—äº¬</option>
                <option value="Shanghai" data-emoji="ğŸ™ï¸">ä¸Šæµ·</option>
                <option value="Guangzhou" data-emoji="ğŸŒº">å¹¿å·</option>
                <option value="Shenzhen" data-emoji="ğŸš€">æ·±åœ³</option>
                <option value="Chengdu" data-emoji="ğŸ¼">æˆéƒ½</option>
                <option value="Hangzhou" data-emoji="ğŸï¸">æ­å·</option>
                <option value="Xi'an" data-emoji="ğŸº">è¥¿å®‰</option>
                <option value="Wuhan" data-emoji="ğŸœ">æ­¦æ±‰</option>
                <option value="Chongqing" data-emoji="ğŸŒ¶ï¸">é‡åº†</option>
                <option value="Tianjin" data-emoji="ğŸ­">å¤©æ´¥</option>
                <option value="Suzhou" data-emoji="ğŸ¯">è‹å·</option>
                <option value="Qingdao" data-emoji="ğŸŒŠ">é’å²›</option>
                <option value="Dalian" data-emoji="âš“">å¤§è¿</option>
                <option value="Harbin" data-emoji="â„ï¸">å“ˆå°”æ»¨</option>
                <option value="Sanya" data-emoji="ğŸ–ï¸">ä¸‰äºš</option>
                <option value="Lhasa" data-emoji="ğŸ”ï¸">æ‹‰è¨</option>
                <option value="Kunming" data-emoji="ğŸ¦‹">æ˜†æ˜</option>
                <option value="Zhuhai" data-emoji="ğŸ¡">ç æµ·</option>
                <option value="Xiamen" data-emoji="ğŸï¸">å¦é—¨</option>
            </select>
        </div>

        <div id="weather-content">
            <div class="loading">
                æ­£åœ¨è·å–å¤©æ°”<span class="loading-dots"></span>
            </div>
        </div>

        <button class="refresh-btn" onclick="loadWeather()">
            ğŸ”„ åˆ·æ–°å¤©æ°”
        </button>
    </div>

    <script>
        // å¤©æ°”å›¾æ ‡æ˜ å°„
        const weatherIcons = {
            'sunny': 'â˜€ï¸',
            'clear': 'â˜€ï¸',
            'partly cloudy': 'â›…',
            'cloudy': 'â˜ï¸',
            'overcast': 'â˜ï¸',
            'light rain': 'ğŸŒ¦ï¸',
            'moderate rain': 'ğŸŒ§ï¸',
            'heavy rain': 'â›ˆï¸',
            'drizzle': 'ğŸ’§',
            'light drizzle': 'ğŸ’§',
            'thunder': 'âš¡',
            'thunderstorm': 'â›ˆï¸',
            'snow': 'â„ï¸',
            'light snow': 'ğŸŒ¨ï¸',
            'moderate snow': 'ğŸŒ¨ï¸',
            'heavy snow': 'â„ï¸',
            'fog': 'ğŸŒ«ï¸',
            'mist': 'ğŸŒ«ï¸',
            'haze': 'ğŸŒ«ï¸',
            'default': 'ğŸŒ¤ï¸'
        };

        // åŸå¸‚ emoji æ˜ å°„
        const cityEmojis = {
            'Nanjing': 'ğŸ¯',
            'Beijing': 'ğŸ›ï¸',
            'Shanghai': 'ğŸ™ï¸',
            'Guangzhou': 'ğŸŒº',
            'Shenzhen': 'ğŸš€',
            'Chengdu': 'ğŸ¼',
            'Hangzhou': 'ğŸï¸',
            'Xi\'an': 'ğŸº',
            'Wuhan': 'ğŸœ',
            'Chongqing': 'ğŸŒ¶ï¸',
            'Tianjin': 'ğŸ­',
            'Suzhou': 'ğŸ¯',
            'Qingdao': 'ğŸŒŠ',
            'Dalian': 'âš“',
            'Harbin': 'â„ï¸',
            'Sanya': 'ğŸ–ï¸',
            'Lhasa': 'ğŸ”ï¸',
            'Kunming': 'ğŸ¦‹',
            'Zhuhai': 'ğŸ¡',
            'Xiamen': 'ğŸï¸'
        };

        // è·å–å¤©æ°”å›¾æ ‡
        function getWeatherIcon(condition) {
            condition = condition.toLowerCase();
            for (let key in weatherIcons) {
                if (condition.includes(key)) {
                    return weatherIcons[key];
                }
            }
            return weatherIcons['default'];
        }

        // è·å–æ˜ŸæœŸå‡ 
        function getDayName(offset) {
            const days = ['ä»Šå¤©', 'æ˜å¤©', 'åå¤©', 'å¤§åå¤©', 'å¤§å¤§åå¤©'];
            const date = new Date();
            date.setDate(date.getDate() + offset);
            const weekDays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
            
            if (offset < days.length - 1) {
                return days[offset];
            }
            return weekDays[date.getDay()];
        }

        // åˆ›å»ºèƒŒæ™¯åŠ¨ç”»å…ƒç´ 
        function createBackgroundElements() {
            const bgContainer = document.getElementById('bg-animation');
            
            // æ·»åŠ æ˜Ÿæ˜Ÿ
            for (let i = 0; i < 20; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.innerHTML = 'â­';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                bgContainer.appendChild(star);
            }

            // æ·»åŠ äº‘æœµ
            const clouds = ['â˜ï¸', 'ğŸŒ¤ï¸', 'â˜ï¸', 'ğŸŒ¥ï¸'];
            for (let i = 0; i < 5; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                cloud.innerHTML = clouds[i % clouds.length];
                cloud.style.top = (Math.random() * 40 + 5) + '%';
                cloud.style.animationDelay = (i * 5) + 's';
                bgContainer.appendChild(cloud);
            }

            // æ·»åŠ å½©è™¹
            const rainbow = document.createElement('div');
            rainbow.className = 'rainbow';
            rainbow.innerHTML = 'ğŸŒˆ';
            rainbow.style.top = '15%';
            rainbow.style.left = '10%';
            bgContainer.appendChild(rainbow);

            // æ·»åŠ æ°”æ³¡
            for (let i = 0; i < 10; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const size = Math.random() * 40 + 20;
                bubble.style.width = size + 'px';
                bubble.style.height = size + 'px';
                bubble.style.left = Math.random() * 100 + '%';
                bubble.style.animationDelay = (i * 0.8) + 's';
                bgContainer.appendChild(bubble);
            }
        }

        // è·å–å½“å‰é€‰ä¸­çš„åŸå¸‚
        function getCurrentCity() {
            const select = document.getElementById('city-select');
            return select.value;
        }

        // è·å–å½“å‰é€‰ä¸­çš„åŸå¸‚ä¸­æ–‡å
        function getCurrentCityName() {
            const select = document.getElementById('city-select');
            return select.options[select.selectedIndex].text;
        }

        // è·å–åŸå¸‚ emoji
        function getCityEmoji(city) {
            return cityEmojis[city] || 'ğŸ ';
        }

        // åˆ‡æ¢åŸå¸‚
        function changeCity() {
            loadWeather();
        }

        // åŠ è½½å¤©æ°”æ•°æ®
        async function loadWeather() {
            const contentDiv = document.getElementById('weather-content');
            const city = getCurrentCity();
            const cityName = getCurrentCityName();
            const cityEmoji = getCityEmoji(city);

            contentDiv.innerHTML = `
                <div class="loading">
                    æ­£åœ¨è·å–${cityName}çš„å¤©æ°”<span class="loading-dots"></span>
                </div>
            `;

            try {
                // ä½¿ç”¨ wttr.in API è·å–å¤©æ°”
                const response = await fetch(`https://wttr.in/${encodeURIComponent(city)}?format=j1`);
                const data = await response.json();

                const current = data.current_condition[0];
                const forecast = data.weather;

                // è·å–å¤©æ°”å›¾æ ‡
                const icon = getWeatherIcon(current.weatherDesc[0].value);

                // æ„å»ºå½“å‰å¤©æ°” HTML
                let html = `
                    <div class="city-name">
                        <span class="city-emoji">${cityEmoji}</span>
                        <span>${cityName}</span>
                    </div>
                    
                    <div class="weather-icon-container">
                        <div class="icon-glow"></div>
                        <div class="weather-icon">${icon}</div>
                    </div>
                    
                    <div class="temperature">${current.temp_C}Â°C</div>
                    <div class="weather-desc">${current.weatherDesc[0].value}</div>
                    
                    <div class="details">
                        <div class="detail-card">
                            <div class="detail-icon">ğŸ’§</div>
                            <div class="detail-label">æ¹¿åº¦</div>
                            <div class="detail-value">${current.humidity}%</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">ğŸ’¨</div>
                            <div class="detail-label">é£é€Ÿ</div>
                            <div class="detail-value">${current.windspeedKmph} km/h</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">ğŸŒ¡ï¸</div>
                            <div class="detail-label">æœ€é«˜æ¸©</div>
                            <div class="detail-value">${forecast[0].maxtempC}Â°C</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">ğŸŒ™</div>
                            <div class="detail-label">æœ€ä½æ¸©</div>
                            <div class="detail-value">${forecast[0].mintempC}Â°C</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">ğŸŒ§ï¸</div>
                            <div class="detail-label">é™é›¨æ¦‚ç‡</div>
                            <div class="detail-value">${current.chanceofrain}%</div>
                        </div>
                        <div class="detail-card">
                            <div class="detail-icon">â˜ï¸</div>
                            <div class="detail-label">äº‘é‡</div>
                            <div class="detail-value">${current.cloudcover}%</div>
                        </div>
                    </div>

                    <div class="forecast">
                        <div class="forecast-title">ğŸ“… æœªæ¥å‡ å¤©å¤©æ°”é¢„æŠ¥</div>
                        <div class="forecast-days">
                `;

                // æ·»åŠ æœªæ¥ 4 å¤©é¢„æŠ¥
                for (let i = 1; i <= 4; i++) {
                    const day = forecast[i] || forecast[forecast.length - 1];
                    const dayDesc = day.avgDesc ? day.avgDesc[0].value : (day.hourly[12] ? day.hourly[12].weatherDesc[0].value : 'æ™´æœ—');
                    const dayIcon = getWeatherIcon(dayDesc);
                    
                    html += `
                        <div class="forecast-day">
                            <div class="forecast-day-name">${getDayName(i)}</div>
                            <div class="forecast-day-icon">${dayIcon}</div>
                            <div class="forecast-day-temp">${day.mintempC}Â° ~ ${day.maxtempC}Â°</div>
                        </div>
                    `;
                }

                html += `
                        </div>
                    </div>
                `;

                contentDiv.innerHTML = html;

            } catch (error) {
                console.error('è·å–å¤©æ°”å¤±è´¥:', error);
                contentDiv.innerHTML = `
                    <div class="error-message">
                        <div class="error-icon">ğŸ¤”</div>
                        <div class="weather-desc">å“å‘€ï¼Œè·å–å¤©æ°”å¤±è´¥äº†</div>
                        <p style="font-size: 1.3em; color: #666; margin-top: 15px;">è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•å“¦~</p>
                    </div>
                `;
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            createBackgroundElements();
            loadWeather();
        };
    </script>
</body>
</html>
